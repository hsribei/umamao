(function(b){var a=0;b.fn.wmd=function(c){this.each(function(){var e={preview:true};var d=b.extend({},e,c||{});if(!d.button_bar){d.button_bar="wmd-button-bar-"+a;b("<div/>").attr("class","wmd-button-bar").attr("id",d.button_bar).insertBefore(this)}if(typeof(d.preview)=="boolean"&&d.preview){d.preview="wmd-preview-"+a;b("<div/>").attr("class","wmd-preview").attr("id",d.preview).insertAfter(this)}if(typeof(d.output)=="boolean"&&d.output){d.output="wmd-output-"+a;b("<div/>").attr("class","wmd-output").attr("id",d.output).insertAfter(this)}this.id=this.id||"wmd-input-"+a;d.input=this.id;setup_wmd(d);a++})}})(jQuery);(function(){WMDEditor=function(n){this.options=WMDEditor.util.extend({},WMDEditor.defaults,n||{});j(this,this.options);this.startEditor()};top.WMDEditor=WMDEditor;WMDEditor.defaults={version:2,output_format:"markdown",lineLength:40,button_bar:"wmd-button-bar",preview:"wmd-preview",output:"wmd-output",input:"wmd-input",imageDialogText:"<p style='margin-top: 0px'><b>Enter the image URL.</b></p><p>You can also add a title, which will be displayed as a tool tip.</p><p>Example:<br />http://wmd-editor.com/images/cloud1.jpg   \"Optional title\"</p>",linkDialogText:"<p style='margin-top: 0px'><b>Enter the web address.</b></p><p>You can also add a title, which will be displayed as a tool tip.</p><p>Example:<br />http://wmd-editor.com/   \"Optional title\"</p>",imageDefaultText:"http://",linkDefaultText:"http://",imageDirectory:"images/",helpLink:"http://wmd-editor.com/",helpHoverTitle:"WMD website",helpTarget:"_blank",previewPollInterval:500,pastePollInterval:100,buttons:"bold italic link blockquote code image ol ul heading hr",previewRefreshCallback:false};WMDEditor.prototype={getPanels:function(){return{buttonBar:l.getElementById(this.options.button_bar),preview:l.getElementById(this.options.preview),output:l.getElementById(this.options.output),input:l.getElementById(this.options.input)}},startEditor:function(){this.panels=this.getPanels();this.previewMgr=new d(this);edit=new this.editor(this.previewMgr.refresh);this.previewMgr.refresh(true)}};var f={isVisible:function(n){return n.offsetWidth>0||n.offsetHeight>0},addEvent:function(o,n,p){if(o.attachEvent){o.attachEvent("on"+n,p)}else{o.addEventListener(n,p,false)}},removeEvent:function(o,n,p){if(o.detachEvent){o.detachEvent("on"+n,p)}else{o.removeEventListener(n,p,false)}},fixEolChars:function(n){n=n.replace(/\r\n/g,"\n");n=n.replace(/\r/g,"\n");return n},extendRegExp:function(q,s,p){if(s===null||s===undefined){s=""}if(p===null||p===undefined){p=""}var r=q.toString();var o="";var n=r.match(/\/([gim]*)$/);if(n===null){o=n[0]}else{o=""}r=r.replace(/(^\/|\/[gim]*$)/g,"");r=s+r+p;return new RegExp(r,o)},createImage:function(n){var p=imageDirectory+n;var o=l.createElement("img");o.className="wmd-button";o.src=p;return o},prompt:function(t,w,p){var q;var n;var r;if(w===undefined){w=""}var s=function(x){var y=(x.charCode||x.keyCode);if(y===27){u(true)}};var u=function(x){f.removeEvent(l.body,"keydown",s);var y=r.value;if(x){y=null}else{y=y.replace("http://http://","http://");y=y.replace("http://https://","https://");y=y.replace("http://ftp://","ftp://");if(y.indexOf("http://")===-1&&y.indexOf("ftp://")===-1&&y.indexOf("https://")===-1){y="http://"+y}}q.parentNode.removeChild(q);n.parentNode.removeChild(n);p(y);return false};var o=function(){n=l.createElement("div");n.className="wmd-prompt-background";style=n.style;style.position="absolute";style.top="0";style.zIndex="1000";if(e.isKonqueror){style.backgroundColor="transparent"}else{if(e.isIE){style.filter="alpha(opacity=50)"}else{style.opacity="0.5"}}var x=g.getPageSize();style.height=x[1]+"px";if(e.isIE){style.left=l.documentElement.scrollLeft;style.width=l.documentElement.clientWidth}else{style.left="0";style.width="100%"}l.body.appendChild(n)};var v=function(){q=l.createElement("div");q.className="wmd-prompt-dialog";q.style.padding="10px;";q.style.position="fixed";q.style.width="400px";q.style.zIndex="1001";var x=l.createElement("div");x.innerHTML=t;x.style.padding="5px";q.appendChild(x);var y=l.createElement("form");y.onsubmit=function(){return u(false)};style=y.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";q.appendChild(y);r=l.createElement("input");r.type="text";r.value=w;style=r.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";y.appendChild(r);var A=l.createElement("input");A.type="button";A.onclick=function(){return u(false)};A.value="OK";style=A.style;style.margin="10px";style.display="inline";style.width="7em";var z=l.createElement("input");z.type="button";z.onclick=function(){return u(true)};z.value="Cancel";style=z.style;style.margin="10px";style.display="inline";style.width="7em";if(/mac/.test(a.platform.toLowerCase())){y.appendChild(z);y.appendChild(A)}else{y.appendChild(A);y.appendChild(z)}f.addEvent(l.body,"keydown",s);q.style.top="50%";q.style.left="50%";q.style.display="block";if(e.isIE_5or6){q.style.position="absolute";q.style.top=l.documentElement.scrollTop+200+"px";q.style.left="50%"}l.body.appendChild(q);q.style.marginTop=-(g.getHeight(q)/2)+"px";q.style.marginLeft=-(g.getWidth(q)/2)+"px"};o();top.setTimeout(function(){v();var y=w.length;if(r.selectionStart!==undefined){r.selectionStart=0;r.selectionEnd=y}else{if(r.createTextRange){var x=r.createTextRange();x.collapse(false);x.moveStart("character",-y);x.moveEnd("character",y);x.select()}}r.focus()},0)},extend:function(){function n(r,q){for(var s in q){r[s]=q[s]}return r}var p={};for(var o=0;o<arguments.length;o++){n(p,arguments[o])}return p}};var g={getTop:function(p,o){var n=p.offsetTop;if(!o){while(p=p.offsetParent){n+=p.offsetTop}}return n},getHeight:function(n){return n.offsetHeight||n.scrollHeight},getWidth:function(n){return n.offsetWidth||n.scrollWidth},getPageSize:function(){var o,p;var n,s;if(self.innerHeight&&self.scrollMaxY){o=l.body.scrollWidth;p=self.innerHeight+self.scrollMaxY}else{if(l.body.scrollHeight>l.body.offsetHeight){o=l.body.scrollWidth;p=l.body.scrollHeight}else{o=l.body.offsetWidth;p=l.body.offsetHeight}}if(self.innerHeight){n=self.innerWidth;s=self.innerHeight}else{if(l.documentElement&&l.documentElement.clientHeight){n=l.documentElement.clientWidth;s=l.documentElement.clientHeight}else{if(l.body){n=l.body.clientWidth;s=l.body.clientHeight}}}var r=Math.max(o,n);var q=Math.max(p,s);return[r,q,n,s]}};var k=function(n){var o=this;var p=n;this.init=function(){if(!f.isVisible(p)){return}this.setInputAreaSelectionStartEnd();this.scrollTop=p.scrollTop;if(!this.text&&p.selectionStart||p.selectionStart===0){this.text=p.value}};this.setInputAreaSelection=function(){if(!f.isVisible(p)){return}if(p.selectionStart!==undefined&&!e.isOpera){p.focus();p.selectionStart=o.start;p.selectionEnd=o.end;p.scrollTop=o.scrollTop}else{if(l.selection){if(l.activeElement&&l.activeElement!==p){return}p.focus();var q=p.createTextRange();q.moveStart("character",-p.value.length);q.moveEnd("character",-p.value.length);q.moveEnd("character",o.end);q.moveStart("character",o.start);q.select()}}};this.setInputAreaSelectionStartEnd=function(){if(p.selectionStart||p.selectionStart===0){o.start=p.selectionStart;o.end=p.selectionEnd}else{if(l.selection){o.text=f.fixEolChars(p.value);var t;if(wmd.ieRetardedClick&&wmd.ieCachedRange){t=wmd.ieCachedRange;wmd.ieRetardedClick=false}else{t=l.selection.createRange()}var u=f.fixEolChars(t.text);var s="\x07";var r=s+u+s;t.text=r;var v=f.fixEolChars(p.value);t.moveStart("character",-r.length);t.text=u;o.start=v.indexOf(s);o.end=v.lastIndexOf(s)-s.length;var q=o.text.length-f.fixEolChars(p.value).length;if(q){t.moveStart("character",-u.length);while(q--){u+="\n";o.end+=1}t.text=u}this.setInputAreaSelection()}}};this.restore=function(){if(o.text!==undefined&&o.text!=p.value){p.value=o.text}this.setInputAreaSelection();p.scrollTop=o.scrollTop};this.getChunks=function(){var q=new h();q.before=f.fixEolChars(o.text.substring(0,o.start));q.startTag="";q.selection=f.fixEolChars(o.text.substring(o.start,o.end));q.endTag="";q.after=f.fixEolChars(o.text.substring(o.end));q.scrollTop=o.scrollTop;return q};this.setChunks=function(q){q.before=q.before+q.startTag;q.after=q.endTag+q.after;if(e.isOpera){q.before=q.before.replace(/\n/g,"\r\n");q.selection=q.selection.replace(/\n/g,"\r\n");q.after=q.after.replace(/\n/g,"\r\n")}this.start=q.before.length;this.end=q.before.length+q.selection.length;this.text=q.before+q.selection+q.after;this.scrollTop=q.scrollTop};this.init()};var h=function(){};h.prototype.findTags=function(o,q){var n=this;var p;if(o){p=f.extendRegExp(o,"","$");this.before=this.before.replace(p,function(r){n.startTag=n.startTag+r;return""});p=f.extendRegExp(o,"^","");this.selection=this.selection.replace(p,function(r){n.startTag=n.startTag+r;return""})}if(q){p=f.extendRegExp(q,"","$");this.selection=this.selection.replace(p,function(r){n.endTag=r+n.endTag;return""});p=f.extendRegExp(q,"^","");this.after=this.after.replace(p,function(r){n.endTag=r+n.endTag;return""})}};h.prototype.trimWhitespace=function(n){this.selection=this.selection.replace(/^(\s*)/,"");if(!n){this.before+=m.$1}this.selection=this.selection.replace(/(\s*)$/,"");if(!n){this.after=m.$1+this.after}};h.prototype.addBlankLines=function(q,p,n){if(q===undefined){q=1}if(p===undefined){p=1}q++;p++;var r;var s;var o;o=/(^\n*)/.exec(this.selection);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag=this.startTag+(o?o[1]:"");o=/(\n*$)/.exec(this.selection);this.selection=this.selection.replace(/(\n*$)/,"");this.endTag=this.endTag+(o?o[1]:"");o=/(^\n*)/.exec(this.startTag);this.startTag=this.startTag.replace(/(^\n*)/,"");this.before=this.before+(o?o[1]:"");o=/(\n*$)/.exec(this.endTag);this.endTag=this.endTag.replace(/(\n*$)/,"");this.after=this.after+(o?o[1]:"");if(this.before){r=s="";while(q--){r+="\\n?";s+="\n"}if(n){r="\\n*"}this.before=this.before.replace(new m(r+"$",""),s)}if(this.after){r=s="";while(p--){r+="\\n?";s+="\n"}if(n){r="\\n*"}this.after=this.after.replace(new m(r,""),s)}};var i=function(u,x,p){var n=this;var s=u;var o;var q;var t;var r;this.tick=function(){if(s.selectionStart||s.selectionStart===0){var z,y;if(s.value==""){z=y=0}else{z=s.selectionStart;y=s.selectionEnd}if(z!=o||y!=q){o=z;q=y;if(t!=s.value){t=s.value;return true}}}return false};var w=function(){if(!f.isVisible(s)){return}if(n.tick()){x()}};var v=function(){r=top.setInterval(w,p)};this.destroy=function(){top.clearInterval(r)};v()};var d=function(E){var p=this;var G;var o;var w;var v;var C;var y;var q=3000;var z="delayed";var t=function(I,J){f.addEvent(I,"input",J);I.onpaste=J;I.ondrop=J;f.addEvent(I,"keypress",J);f.addEvent(I,"keydown",J);o=new i(E.panels.input,J,E.options.previewPollInterval)};var A=function(){var I=0;if(top.innerHeight){I=top.pageYOffset}else{if(l.documentElement&&l.documentElement.scrollTop){I=l.documentElement.scrollTop}else{if(l.body){I=l.body.scrollTop}}}return I};var B=function(I){return I.replace(/\\([\(\[])([\s\S]*?)\\([\]\)])/g,function(J,K,L,M){return"\\\\"+K+L.replace(/([_\*\\])/g,"\\$1")+"\\\\"+M})};var u=function(){if(!E.panels.preview&&!E.panels.output){return}var L=E.panels.input.value;if(L&&L==C){return}else{C=L}var J=new Date().getTime();if(!G&&E.showdown){G=new E.showdown.converter()}if(G){L=G.makeHtml(B(L))}var I=new Date().getTime();v=I-J;n(L);y=L;var K=$(E.panels.preview).find("code");if(K.length>0){K.replaceWith(function(){return $("<code>"+$(this).text().replace(/\\\\([\(\[])([\s\S]*?)\\\\([\]\)])/g,function(M){return M.replace(/\\([\(\)\[\]_\*\\])/g,"$1")})+"</code>")})}};var r=function(){u();if(E.options.previewRefreshCallback){E.options.previewRefreshCallback(E)}};var F=function(){if(w){top.clearTimeout(w);w=undefined}if(z!=="manual"){var I=0;if(z==="delayed"){I=v}if(I>q){I=q}w=top.setTimeout(r,I)}};var s=function(I){if(I.scrollHeight<=I.clientHeight){return 1}return I.scrollTop/(I.scrollHeight-I.clientHeight)};var H=function(){if(E.panels.preview){E.panels.preview.scrollTop=(E.panels.preview.scrollHeight-E.panels.preview.clientHeight)*s(E.panels.preview)}if(E.panels.output){E.panels.output.scrollTop=(E.panels.output.scrollHeight-E.panels.output.clientHeight)*s(E.panels.output)}};this.refresh=function(I){if(I){C="";r()}else{F()}};this.processingTime=function(){return v};this.output=function(){return y};this.setUpdateMode=function(I){z=I;p.refresh()};var x=true;var n=function(L){var I=g.getTop(E.panels.input)-A();if(E.panels.output){if(E.panels.output.value!==undefined){E.panels.output.value=L;E.panels.output.readOnly=true}else{var K=L.replace(/&/g,"&amp;");K=K.replace(/</g,"&lt;");E.panels.output.innerHTML="<pre><code>"+K+"</code></pre>"}}if(E.panels.preview){E.panels.preview.innerHTML=L}H();if(x){x=false;return}var J=g.getTop(E.panels.input)-A();if(e.isIE){top.setTimeout(function(){top.scrollBy(0,J-I)},0)}else{top.scrollBy(0,J-I)}};var D=function(){t(E.panels.input,F);u();if(E.panels.preview){E.panels.preview.scrollTop=0}if(E.panels.output){E.panels.output.scrollTop=0}};this.destroy=function(){if(o){o.destroy()}};D()};var c=function(x,B,p){var E=this;var t=[];var o=0;var w="none";var z;var n;var v;var s;var C=function(G,F){if(w!=G){w=G;if(!F){u()}}if(!e.isIE||w!="moving"){v=top.setTimeout(r,1)}else{s=null}};var r=function(){s=new k(x);n.tick();v=undefined};this.setCommandMode=function(){w="command";u();v=top.setTimeout(r,0)};this.canUndo=function(){return o>1};this.canRedo=function(){if(t[o+1]){return true}return false};this.undo=function(){if(E.canUndo()){if(z){z.restore();z=null}else{t[o]=new k(x);t[--o].restore();if(p){p()}}}w="none";x.focus();r()};this.redo=function(){if(E.canRedo()){t[++o].restore();if(p){p()}}w="none";x.focus();r()};var u=function(){var F=s||new k(x);if(!F){return false}if(w=="moving"){if(!z){z=F}return}if(z){if(t[o-1].text!=z.text){t[o++]=z}z=null}t[o++]=F;t[o+1]=null;if(p){p()}};var D=function(F){var H=false;if(F.ctrlKey||F.metaKey){var G=F.charCode||F.keyCode;var I=String.fromCharCode(G);switch(I){case"y":E.redo();H=true;break;case"z":if(!F.shiftKey){E.undo()}else{E.redo()}H=true;break}}if(H){if(F.preventDefault){F.preventDefault()}if(top.event){top.event.returnValue=false}return}};var y=function(F){if(!F.ctrlKey&&!F.metaKey){var G=F.keyCode;if((G>=33&&G<=40)||(G>=63232&&G<=63235)){C("moving")}else{if(G==8||G==46||G==127){C("deleting")}else{if(G==13){C("newlines")}else{if(G==27){C("escape")}else{if((G<16||G>20)&&G!=91){C("typing")}}}}}}};var q=function(){f.addEvent(x,"keypress",function(G){if((G.ctrlKey||G.metaKey)&&(G.keyCode==89||G.keyCode==90)){G.preventDefault()}});var F=function(){if(e.isIE||(s&&s.text!=x.value)){if(v===undefined){w="paste";u();r()}}};n=new i(x,F,B);f.addEvent(x,"keydown",D);f.addEvent(x,"keydown",y);f.addEvent(x,"mousedown",function(){C("moving")});x.onpaste=F;x.ondrop=F};var A=function(){q();r();u()};this.destroy=function(){if(n){n.destroy()}};A()};WMDEditor.util=f;WMDEditor.position=g;WMDEditor.TextareaState=k;WMDEditor.InputPoller=i;WMDEditor.PreviewManager=d;WMDEditor.UndoManager=c;var l=top.document;var m=top.RegExp;var a=top.navigator;function b(){var n={};n.isIE=/msie/.test(a.userAgent.toLowerCase());n.isIE_5or6=/msie 6/.test(a.userAgent.toLowerCase())||/msie 5/.test(a.userAgent.toLowerCase());n.isIE_7plus=n.isIE&&!n.isIE_5or6;n.isOpera=/opera/.test(a.userAgent.toLowerCase());n.isKonqueror=/konqueror/.test(a.userAgent.toLowerCase());return n}var e=b();var j=function(p,r){p.Command={};p.Global={};p.buttons={};p.showdown=top.Attacklab&&top.Attacklab.showdown;var o=WMDEditor.util;var n=WMDEditor.position;var q=p.Command;p.ieCachedRange=null;p.ieRetardedClick=false;p.editor=function(B){if(!B){B=function(){}}var y=p.panels.input;var v=0;var C=this;var x;var E;var t;var z;var A;var H=function(J){y.focus();if(J.textOp){if(A){A.setCommandMode()}var L=new k(p.panels.input);if(!L){return}var N=L.getChunks();var I=function(){y.focus();if(N){L.setChunks(N)}L.restore();B()};var M=true;var K=J.textOp(N,I,M);if(!K){I()}}if(J.execute){J.execute(C)}};var F=function(){if(A){s(p.buttons["wmd-undo-button"],A.canUndo());s(p.buttons["wmd-redo-button"],A.canRedo())}};var s=function(I,K){var L="0px";var M="-20px";var J="-40px";if(K){I.style.backgroundPosition=I.XShift+" "+L;I.onmouseover=function(){this.style.backgroundPosition=this.XShift+" "+J};I.onmouseout=function(){this.style.backgroundPosition=this.XShift+" "+L};if(e.isIE){I.onmousedown=function(){p.ieRetardedClick=true;p.ieCachedRange=document.selection.createRange()}}if(!I.isHelp){I.onclick=function(){if(this.onmouseout){this.onmouseout()}H(this);return false}}}else{I.style.backgroundPosition=I.XShift+" "+M;I.onmouseover=I.onmouseout=I.onclick=function(){}}};var w=function(){var N=document.getElementById(r.button_bar||"wmd-button-bar");var J="0px";var M="-20px";var S="-40px";var ac=document.createElement("ul");ac.className="wmd-button-row";ac=N.appendChild(ac);var V=0;function aa(aj,al,am){var ak=document.createElement("li");p.buttons[aj]=ak;ak.className="wmd-button "+aj;ak.XShift=V+"px";V-=20;if(al){ak.title=al}if(am){ak.textOp=am}return ak}function Y(aj,al,am){var ak=aa(aj,al,am);s(ak,true);ac.appendChild(ak);return ak}function ai(){var aj=document.createElement("li");aj.className="wmd-spacer";ac.appendChild(aj);return aj}var R=Y("wmd-bold-button","Strong <strong> Ctrl+B",q.doBold);var Q=Y("wmd-italic-button","Emphasis <em> Ctrl+I",q.doItalic);var W=ai();var Z=Y("wmd-link-button","Hyperlink <a> Ctrl+L",function(aj,ak,al){return q.doLinkOrImage(aj,ak,false)});var ad=Y("wmd-quote-button","Blockquote <blockquote> Ctrl+Q",q.doBlockquote);var ae=Y("wmd-code-button","Code Sample <pre><code> Ctrl+K",q.doCode);var O=Y("wmd-image-button","Image <img> Ctrl+G",function(aj,ak,al){return q.doLinkOrImage(aj,ak,true)});var U=ai();var P=Y("wmd-olist-button","Numbered List <ol> Ctrl+O",function(aj,ak,al){q.doList(aj,ak,true,al)});var ah=Y("wmd-ulist-button","Bulleted List <ul> Ctrl+U",function(aj,ak,al){q.doList(aj,ak,false,al)});var ab=Y("wmd-heading-button","Heading <h1>/<h2> Ctrl+H",q.doHeading);var K=Y("wmd-hr-button","Horizontal Rule <hr> Ctrl+R",q.doHorizontalRule);var T=ai();var I=Y("wmd-undo-button","Undo - Ctrl+Z");I.execute=function(aj){aj.undo()};var X=null;var ag=Y("wmd-redo-button","Redo - Ctrl+Y");if(/win/.test(a.platform.toLowerCase())){ag.title="Redo - Ctrl+Y"}else{ag.title="Redo - Ctrl+Shift+Z"}ag.execute=function(aj){aj.redo()};var af=aa("wmd-help-button");af.isHelp=true;s(af,true);ac.appendChild(af);var L=document.createElement("a");L.href=r.helpLink;L.target=r.helpTarget;L.title=r.helpHoverTitle;af.appendChild(L);F()};var u=function(){if(/\?noundo/.test(l.location.href)){p.nativeUndo=true}if(!p.nativeUndo){A=new c(p.panels.input,p.options.pastePollInterval,function(){B();F()})}w();var J="keydown";if(e.isOpera){J="keypress"}o.addEvent(y,J,function(L){if(L.ctrlKey||L.metaKey){var M=L.charCode||L.keyCode;var K=String.fromCharCode(M).toLowerCase();switch(K){case"b":H(p.buttons["wmd-bold-button"]);break;case"i":H(p.buttons["wmd-italic-button"]);break;case"l":H(p.buttons["wmd-link-button"]);break;case"q":H(p.buttons["wmd-quote-button"]);break;case"k":H(p.buttons["wmd-code-button"]);break;case"g":H(p.buttons["wmd-image-button"]);break;case"o":H(p.buttons["wmd-olist-button"]);break;case"u":H(p.buttons["wmd-ulist-button"]);break;case"h":H(p.buttons["wmd-heading-button"]);break;case"r":H(p.buttons["wmd-hr-button"]);break;case"y":H(p.buttons["wmd-redo-button"]);break;case"z":if(L.shiftKey){H(p.buttons["wmd-redo-button"])}else{H(p.buttons["wmd-undo-button"])}break;default:return}if(L.preventDefault){L.preventDefault()}if(top.event){top.event.returnValue=false}}});o.addEvent(y,"keyup",function(K){if(!K.shiftKey&&!K.ctrlKey&&!K.metaKey){var L=K.charCode||K.keyCode;if(L===13){fakeButton={};fakeButton.textOp=q.doAutoindent;H(fakeButton)}}});if(e.isIE){o.addEvent(y,"keydown",function(K){var L=K.keyCode;if(L===27){return false}})}if(y.form){var I=y.form.onsubmit;y.form.onsubmit=function(){D();if(I){return I.apply(this,arguments)}}}};var D=function(){if(p.showdown){var I=new p.showdown.converter()}var J=y.value;var K=function(){y.value=J};if(!/markdown/.test(r.output_format.toLowerCase())){if(I){y.value=I.makeHtml(J);top.setTimeout(K,0)}}return true};this.undo=function(){if(A){A.undo()}};this.redo=function(){if(A){A.redo()}};var G=function(){u()};this.destroy=function(){if(A){A.destroy()}if(t.parentNode){t.parentNode.removeChild(t)}if(y){y.style.marginTop=""}top.clearInterval(z)};G()};q.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";q.unwrap=function(t){var s=new m("([^\\n])\\n(?!(\\n|"+q.prefixes+"))","g");t.selection=t.selection.replace(s,"$1 $2")};q.wrap=function(t,s){q.unwrap(t);var u=new m("(.{1,"+s+"})( +|$\\n?)","gm");t.selection=t.selection.replace(u,function(v,w){if(new m("^"+q.prefixes,"").test(v)){return v}return w+"\n"});t.selection=t.selection.replace(/\s+$/,"")};q.doBold=function(s,t,u){return q.doBorI(s,2,"strong text")};q.doItalic=function(s,t,u){return q.doBorI(s,1,"emphasized text")};q.doBorI=function(v,z,y){v.trimWhitespace();v.selection=v.selection.replace(/\n{2,}/g,"\n");v.before.search(/(\**$)/);var x=m.$1;v.after.search(/(^\**)/);var w=m.$1;var s=Math.min(x.length,w.length);if((s>=z)&&(s!=2||z!=1)){v.before=v.before.replace(m("[*]{"+z+"}$",""),"");v.after=v.after.replace(m("^[*]{"+z+"}",""),"")}else{if(!v.selection&&w){v.after=v.after.replace(/^([*_]*)/,"");v.before=v.before.replace(/(\s?)$/,"");var u=m.$1;v.before=v.before+w+u}else{if(!v.selection&&!w){v.selection=y}var t=z<=1?"*":"**";v.before=v.before+t;v.after=t+v.after}}return};q.stripLinkDefs=function(t,s){t=t.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(x,y,u,v,w){s[y]=x.replace(/\s*$/,"");if(v){s[y]=x.replace(/["(](.+?)[")]$/,"");return v+w}return""});return t};q.addLinkDef=function(z,v){var s=0;var u={};z.before=q.stripLinkDefs(z.before,u);z.selection=q.stripLinkDefs(z.selection,u);z.after=q.stripLinkDefs(z.after,u);var t="";var y=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g;var x=function(B){s++;B=B.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+s+"]:");t+="\n"+B};var w=function(C,D,E,B){if(u[E]){x(u[E]);return D+s+B}return C};z.before=z.before.replace(y,w);if(v){x(v)}else{z.selection=z.selection.replace(y,w)}var A=s;z.after=z.after.replace(y,w);if(z.after){z.after=z.after.replace(/\n*$/,"")}if(!z.after){z.selection=z.selection.replace(/\n*$/,"")}z.after+="\n\n"+t;return A};q.doLinkOrImage=function(s,t,v){s.trimWhitespace();s.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(s.endTag.length>1){s.startTag=s.startTag.replace(/!?\[/,"");s.endTag="";q.addLinkDef(s,null)}else{if(/\n\n/.test(s.selection)){q.addLinkDef(s,null);return}var u=function(y){if(y!==null){s.startTag=s.endTag="";var x=" [999]: "+y;var w=q.addLinkDef(s,x);s.startTag=v?"![":"[";s.endTag="]["+w+"]";if(!s.selection){if(v){s.selection="alt text"}else{s.selection="link text"}}}t()};if(v){o.prompt(r.imageDialogText,r.imageDefaultText,u)}else{o.prompt(r.linkDialogText,r.linkDefaultText,u)}return true}};q.doAutoindent=function(s,t,u){s.before=s.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");s.before=s.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");s.before=s.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");u=false;if(/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(s.before)){if(q.doList){q.doList(s,t,false,true)}}if(/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(s.before)){if(q.doList){q.doList(s,t,true,true)}}if(/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(s.before)){if(q.doBlockquote){q.doBlockquote(s,t,u)}}if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(s.before)){if(q.doCode){q.doCode(s,t,u)}}};q.doBlockquote=function(t,u,w){t.selection=t.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(A,z,y,x){t.before+=z;t.after=x+t.after;return y});t.before=t.before.replace(/(>[ \t]*)$/,function(y,x){t.selection=x+t.selection;return""});var s=w?"Blockquote":"";t.selection=t.selection.replace(/^(\s|>)+$/,"");t.selection=t.selection||s;if(t.before){t.before=t.before.replace(/\n?$/,"\n")}if(t.after){t.after=t.after.replace(/^\n?/,"\n")}t.before=t.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(x){t.startTag=x;return""});t.after=t.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(x){t.endTag=x;return""});var v=function(y){var x=y?"> ":"";if(t.startTag){t.startTag=t.startTag.replace(/\n((>|\s)*)\n$/,function(A,z){return"\n"+z.replace(/^[ ]{0,3}>?[ \t]*$/gm,x)+"\n"})}if(t.endTag){t.endTag=t.endTag.replace(/^\n((>|\s)*)\n/,function(A,z){return"\n"+z.replace(/^[ ]{0,3}>?[ \t]*$/gm,x)+"\n"})}};if(/^(?![ ]{0,3}>)/m.test(t.selection)){q.wrap(t,r.lineLength-2);t.selection=t.selection.replace(/^/gm,"> ");v(true);t.addBlankLines()}else{t.selection=t.selection.replace(/^[ ]{0,3}> ?/gm,"");q.unwrap(t);v(false);if(!/^(\n|^)[ ]{0,3}>/.test(t.selection)&&t.startTag){t.startTag=t.startTag.replace(/\n{0,2}$/,"\n\n")}if(!/(\n|^)[ ]{0,3}>.*$/.test(t.selection)&&t.endTag){t.endTag=t.endTag.replace(/^\n{0,2}/,"\n\n")}}if(!/\n/.test(t.selection)){t.selection=t.selection.replace(/^(> *)/,function(x,y){t.startTag+=y;return""})}};q.doCode=function(s,t,x){var w=/\S[ ]*$/.test(s.before);var y=/^[ ]*\S/.test(s.after);if((!y&&!w)||/\n/.test(s.selection)){s.before=s.before.replace(/[ ]{4}$/,function(z){s.selection=z+s.selection;return""});var v=1;var u=1;if(/\n(\t|[ ]{4,}).*\n$/.test(s.before)||s.after===""){v=0}if(/^\n(\t|[ ]{4,})/.test(s.after)){u=0}s.addBlankLines(v,u);if(!s.selection){s.startTag="    ";s.selection=x?"enter code here":""}else{if(/^[ ]{0,3}\S/m.test(s.selection)){s.selection=s.selection.replace(/^/gm,"    ")}else{s.selection=s.selection.replace(/^[ ]{4}/gm,"")}}}else{s.trimWhitespace();s.findTags(/`/,/`/);if(!s.startTag&&!s.endTag){s.startTag=s.endTag="`";if(!s.selection){s.selection=x?"enter code here":""}}else{if(s.endTag&&!s.startTag){s.before+=s.endTag;s.endTag=""}else{s.startTag=s.endTag=""}}}};q.doList=function(D,w,v,F){var G=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/;var E=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var s="-";var A=1;var y=function(){var H;if(v){H=" "+A+". ";A++}else{H=" "+s+" "}return H};var z=function(H){if(v===undefined){v=/^\s*\d/.test(H)}H=H.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(I){return y()});return H};D.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);if(D.before&&!/\n$/.test(D.before)&&!/^\n/.test(D.startTag)){D.before+=D.startTag;D.startTag=""}if(D.startTag){var u=/\d+[.]/.test(D.startTag);D.startTag="";D.selection=D.selection.replace(/\n[ ]{4}/g,"\n");q.unwrap(D);D.addBlankLines();if(u){D.after=D.after.replace(E,z)}if(v==u){return}}var x=1;D.before=D.before.replace(G,function(H){if(/^\s*([*+-])/.test(H)){s=m.$1}x=/[^\n]\n\n[^\n]/.test(H)?1:0;return z(H)});if(!D.selection){D.selection=F?"List item":" "}var B=y();var t=1;D.after=D.after.replace(E,function(H){t=/[^\n]\n\n[^\n]/.test(H)?1:0;return z(H)});D.trimWhitespace(true);D.addBlankLines(x,t,true);D.startTag=B;var C=B.replace(/./g," ");q.wrap(D,r.lineLength-C.length);D.selection=D.selection.replace(/\n/g,"\n"+C)};q.doHeading=function(u,v,y){u.selection=u.selection.replace(/\s+/g," ");u.selection=u.selection.replace(/(^\s+|\s+$)/g,"");if(!u.selection){u.startTag="## ";u.selection="Heading";u.endTag=" ##";return}var w=0;u.findTags(/#+[ ]*/,/[ ]*#+/);if(/#+/.test(u.startTag)){w=m.lastMatch.length}u.startTag=u.endTag="";u.findTags(null,/\s?(-+|=+)/);if(/\=+/.test(u.endTag)){w=1}if(/-+/.test(u.endTag)){w=2}u.startTag=u.endTag="";u.addBlankLines(1,1);var x=w==0?2:w-1;if(x>0){var t=x>=2?"-":"=";var s=u.selection.length;if(s>r.lineLength){s=r.lineLength}u.endTag="\n";while(s--){u.endTag+=t}}};q.doHorizontalRule=function(s,t,u){s.startTag="----------\n";s.selection="";s.addBlankLines(2,1,true)}}})();function setup_wmd(a){return new WMDEditor(a)}var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};Attacklab.showdown.converter=function(){var a;var j;var A;var i=0;this.makeHtml=function(H){a=new Array();j=new Array();A=new Array();H=H.replace(/~/g,"~T");H=H.replace(/\$/g,"~D");H=H.replace(/\r\n/g,"\n");H=H.replace(/\r/g,"\n");H="\n\n"+H+"\n\n";H=z(H);H=H.replace(/^[ \t]+$/mg,"");H=m(H);H=d(H);H=G(H);H=q(H);H=H.replace(/~D/g,"$$");H=H.replace(/~T/g,"~");H=H.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(K,J,I){var M=H.slice(0,I),L=H.slice(I);if(M.match(/<[^>]+$/)&&L.match(/^[^>]*>/)){return K}return"<a href='"+K+"'>"+K+"</a>"});H=H.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(I){return"<a href='mailto:"+I+"'>"+I+"</a>"});return H};var d=function(H){var H=H.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(K,M,L,J,I){M=M.toLowerCase();a[M]=h(L);if(J){return J+I}else{if(I){j[M]=I.replace(/"/g,"&quot;")}}return""});return H};var m=function(J){J=J.replace(/\n/g,"\n\n");var I="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var H="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";J=J.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,x);J=J.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,x);J=J.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,x);J=J.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,x);J=J.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,x);J=J.replace(/\n\n/g,"\n");return J};var x=function(H,I){var J=I;J=J.replace(/\n\n/g,"\n");J=J.replace(/^\n/,"");J=J.replace(/\n+$/g,"");J="\n\n~K"+(A.push(J)-1)+"K\n\n";return J};var G=function(I){I=f(I);var H=o("<hr />");I=I.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,H);I=I.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,H);I=I.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,H);I=E(I);I=b(I);I=u(I);I=m(I);I=g(I);return I};var r=function(H){H=C(H);H=l(H);H=e(H);H=F(H);H=y(H);H=n(H);H=h(H);H=c(H);H=H.replace(/  +\n/g," <br />\n");return H};var l=function(I){var H=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;I=I.replace(H,function(K){var J=K.replace(/(.)<\/?code>(?=.)/g,"$1`");J=w(J,"\\`*_");return J});return I};var y=function(H){H=H.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,D);H=H.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,D);H=H.replace(/(\[([^\[\]]+)\])()()()()()/g,D);return H};var D=function(N,T,S,R,Q,P,M,L){if(L==undefined){L=""}var K=T;var I=S;var J=R.toLowerCase();var H=Q;var O=L;if(H==""){if(J==""){J=I.toLowerCase().replace(/ ?\n/g," ")}H="#"+J;if(a[J]!=undefined){H=a[J];if(j[J]!=undefined){O=j[J]}}else{if(K.search(/\(\s*\)$/m)>-1){H=""}else{return K}}}H=w(H,"*_");var U='<a href="'+H+'"';if(O!=""){O=O.replace(/"/g,"&quot;");O=w(O,"*_");U+=' title="'+O+'"'}U+=">"+I+"</a>";return U};var F=function(H){H=H.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,t);H=H.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t);return H};var t=function(N,T,S,R,Q,P,M,L){var K=T;var J=S;var I=R.toLowerCase();var H=Q;var O=L;if(!O){O=""}if(H==""){if(I==""){I=J.toLowerCase().replace(/ ?\n/g," ")}H="#"+I;if(a[I]!=undefined){H=a[I];if(j[I]!=undefined){O=j[I]}}else{return K}}J=J.replace(/"/g,"&quot;");H=w(H,"*_");var U='<img src="'+H+'" alt="'+J+'"';O=O.replace(/"/g,"&quot;");O=w(O,"*_");U+=' title="'+O+'"';U+=" />";return U};var f=function(H){H=H.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(I,J){return o("<h1>"+r(J)+"</h1>")});H=H.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(J,I){return o("<h2>"+r(I)+"</h2>")});H=H.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(I,L,K){var J=L.length;return o("<h"+J+">"+r(K)+"</h"+J+">")});return H};var p;var E=function(I){I+="~0";var H=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(i){I=I.replace(H,function(K,N,M){var O=N;var L=(M.search(/[*+-]/g)>-1)?"ul":"ol";O=O.replace(/\n{2,}/g,"\n\n\n");var J=p(O);J=J.replace(/\s+$/,"");J="<"+L+">"+J+"</"+L+">\n";return J})}else{H=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;I=I.replace(H,function(L,P,N,K){var O=P;var Q=N;var M=(K.search(/[*+-]/g)>-1)?"ul":"ol";var Q=Q.replace(/\n{2,}/g,"\n\n\n");var J=p(Q);J=O+"<"+M+">\n"+J+"</"+M+">\n";return J})}I=I.replace(/~0/,"");return I};p=function(H){i++;H=H.replace(/\n{2,}$/,"\n");H+="~0";H=H.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(K,M,L,J,I){var O=I;var N=M;var P=L;if(N||(O.search(/\n{2,}/)>-1)){O=G(s(O))}else{O=E(s(O));O=O.replace(/\n$/,"");O=r(O)}return"<li>"+O+"</li>\n"});H=H.replace(/~0/g,"");i--;return H};var b=function(H){H+="~0";H=H.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(I,K,J){var L=K;var M=J;L=v(s(L));L=z(L);L=L.replace(/^\n+/g,"");L=L.replace(/\n+$/g,"");L="<pre><code>"+L+"\n</code></pre>";return o(L)+M});H=H.replace(/~0/,"");return H};var o=function(H){H=H.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(A.push(H)-1)+"K\n\n"};var C=function(H){H=H.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(K,M,L,J,I){var N=J;N=N.replace(/^([ \t]*)/g,"");N=N.replace(/[ \t]*$/g,"");N=v(N);return M+"<code>"+N+"</code>"});return H};var v=function(H){H=H.replace(/&/g,"&amp;");H=H.replace(/</g,"&lt;");H=H.replace(/>/g,"&gt;");H=w(H,"*_{}[]\\",false);return H};var c=function(H){H=H.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");H=H.replace(/(\w)_(\w)/g,"$1~E95E$2");H=H.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return H};var u=function(H){H=H.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(I,J){var K=J;K=K.replace(/^[ \t]*>[ \t]?/gm,"~0");K=K.replace(/~0/g,"");K=K.replace(/^[ \t]+$/gm,"");K=G(K);K=K.replace(/(^|\n)/g,"$1  ");K=K.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(L,M){var N=M;N=N.replace(/^  /mg,"~0");N=N.replace(/~0/g,"");return N});return o("<blockquote>\n"+K+"\n</blockquote>")});return H};var g=function(N){N=N.replace(/^\n+/g,"");N=N.replace(/\n+$/g,"");var M=N.split(/\n{2,}/g);var J=new Array();var H=M.length;for(var I=0;I<H;I++){var L=M[I];if(L.search(/~K(\d+)K/g)>=0){J.push(L)}else{if(L.search(/\S/)>=0){L=r(L);L=L.replace(/\n/g,"<br />");L=L.replace(/^([ \t]*)/g,"<p>");L+="</p>";J.push(L)}}}H=J.length;for(var I=0;I<H;I++){while(J[I].search(/~K(\d+)K/)>=0){var K=A[RegExp.$1];K=K.replace(/\$/g,"$$$$");J[I]=J[I].replace(/~K\d+K/,K)}}return J.join("\n\n")};var h=function(H){H=H.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");H=H.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return H};var e=function(H){H=H.replace(/\\(\\)/g,k);H=H.replace(/\\([`*_{}\[\]()>#+-.!])/g,k);return H};var n=function(H){H=H.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');H=H.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(I,J){return B(q(J))});return H};var B=function(J){function I(L){var K="0123456789ABCDEF";var M=L.charCodeAt(0);return(K.charAt(M>>4)+K.charAt(M&15))}var H=[function(K){return"&#"+K.charCodeAt(0)+";"},function(K){return"&#x"+I(K)+";"},function(K){return K}];J="mailto:"+J;J=J.replace(/./g,function(K){if(K=="@"){K=H[Math.floor(Math.random()*2)](K)}else{if(K!=":"){var L=Math.random();K=(L>0.9?H[2](K):L>0.45?H[1](K):H[0](K))}}return K});J='<a href="'+J+'">'+J+"</a>";J=J.replace(/">.+:/g,'">');return J};var q=function(H){H=H.replace(/~E(\d+)E/g,function(I,K){var J=parseInt(K);return String.fromCharCode(J)});return H};var s=function(H){H=H.replace(/^(\t|[ ]{1,4})/gm,"~0");H=H.replace(/~0/g,"");return H};var z=function(H){H=H.replace(/\t(?=\t)/g,"    ");H=H.replace(/\t/g,"~A~B");H=H.replace(/~B(.+?)~A/g,function(I,L,K){var N=L;var J=4-N.length%4;for(var M=0;M<J;M++){N+=" "}return N});H=H.replace(/~A/g,"    ");H=H.replace(/~B/g,"");return H};var w=function(L,I,J){var H="(["+I.replace(/([\[\]\\])/g,"\\$1")+"])";if(J){H="\\\\"+H}var K=new RegExp(H,"g");L=L.replace(K,k);return L};var k=function(H,J){var I=J.charCodeAt(0);return"~E"+I+"E"}};var Showdown=Attacklab.showdown;if(Attacklab.fileLoaded){Attacklab.fileLoaded("showdown.js")}(function(a){a.fn.wmdMath=function(b){var c=function(d){MathJax.Hub.Queue(["Typeset",MathJax.Hub,b.preview])};b=a.extend({},{previewRefreshCallback:c},b||{});this.wmd(b)}})(jQuery);$(document).ready(function(){$("textarea").focus(function(){if(!window.onbeforeunload){window.onbeforeunload=function(){var a=false;$("textarea").each(function(){if($.trim($(this).val())!=""){a=true}});if(a){return I18n.on_leave_page}return null}}})});function initTopicAutocompleteForReclassifying(){var b=new TopicAutocomplete("#topic-autocomplete-input","#topic-autocomplete-suggestions","/topics/autocomplete");var d=$("#question .body-col ul.topic-list");var c=location.href;function a(){d.find(".remove").hide();$("#topic-autocomplete-input").hide();$(".add-topic").hide();$(".cancel-reclassify").hide();if(d.find("li").length==0){$(".reclassify .empty").show();$(".reclassify .not-empty").hide()}else{$(".reclassify .empty").hide();$(".reclassify .not-empty").show()}$(".retag").show()}function e(){d.find(".remove").show();$("#topic-autocomplete-input").show();$(".add-topic").show();$(".cancel-reclassify").show();$(".retag").hide()}a();$(".reclassify").click(function(){e();return false});$(".add-topic").live("click",function(){if(b.input.val()!=b.startText){b.returnDefault()}return false});$(".cancel-reclassify").live("click",function(){a();return false});$("a.remove",d).live("click",function(){var f=$(this);$.getJSON(f.attr("href"),function(g){f.closest("li").remove()});return false});b.action=function(f){$.getJSON(c+"/classify?topic="+encodeURIComponent(f),function(g){if(g.success){d.find(".retag").before(g.box)}});b.clear()}}$(document).ready(function(){initTopicAutocompleteForReclassifying();$("#close_question_form").hide();$(".comments_wrapper").hide();$("input#question_title").focus();$(".modal .close").live("click",function(){$.colorbox.close();return false});$("#body").live("keyup",function(){var b=$(this);var a=b.val().length;var d=b.attr("maxlength");var c=$(".charsleft");if(a<d){c.html(d-a)}else{b.val(b.val().substr(0,d));c.html(0)}});Utils.clickObject(".share-question-widget input[type=submit]",function(){return{success:function(a){$.colorbox.close()},error:function(a){if(a.status=="needs_permission"){Utils.modal({html:a.html})}}}});Utils.clickObject("#sidebar .share .facebook,#sidebar .share .twitter",function(){return{success:function(a){Utils.modal({html:a.html})},error:function(a){if(a.status=="needs_connection"){Utils.modal({html:a.html})}}}});Utils.clickObject("form.vote_form button",function(){var b=$(this).attr("name");var a=$(this).parents("form");return{data:a.serialize()+"&"+b+"=1",success:function(c){a.find(".votes_average").text(c.average);if(c.vote_state=="deleted"){a.find("button[name=vote_down] img").attr("src","/images/to_vote_down.png");a.find("button[name=vote_up] img").attr("src","/images/to_vote_up.png")}else{if(c.vote_type=="vote_down"){a.find("button[name=vote_down] img").attr("src","/images/vote_down.png");a.find("button[name=vote_up] img").attr("src","/images/to_vote_up.png")}else{a.find("button[name=vote_up] img").attr("src","/images/vote_up.png");a.find("button[name=vote_down] img").attr("src","/images/to_vote_down.png")}}},error:function(c){if(c.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}}});Utils.clickObject(".comment .comment-votes form.vote-up-comment-form input[name=vote_up]",function(){var a=$(this);var b=$(this).closest("form");a.hide();return{data:b.serialize()+"&"+a.attr("name")+"=1",success:function(c){if(c.vote_state=="deleted"){a.attr("src","/images/dialog-ok.png")}else{a.attr("src","/images/dialog-ok-apply.png")}a.parents(".comment-votes").children(".votes_average").html(c.average)},complete:function(){a.show()}}});Utils.clickObject("form.mainAnswerForm .button",function(){var b=$(this).parents("form");var c=$("#answers .hentry");var a=$(this);return{success:function(f){window.onbeforeunload=null;var e=$(f.html);var d=e.find(".entry-content");e.find(".comments_wrapper").hide();c.append(e);highlightEffect(e);b.find("textarea").val("");MathJax.Hub.Queue(["Typeset",MathJax.Hub,e[0]])},error:function(d){if(d.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}}});Utils.clickObject("form.commentForm .button",function(){var b=$(this).parents("form");var c=$(this).closest(".commentable").find(".comments");var a=$(this);return{success:function(e){var d=b.find("textarea");window.onbeforeunload=null;var f=$(e.html);c.append(f);c.closest(".commentable").find(".ccontrol").replaceWith(e.count);highlightEffect(f);d.val("");MathJax.Hub.Queue(["Typeset",MathJax.Hub,f[0]])},error:function(d){if(d.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}}});$(".edit_comment").live("click",function(){var b=$(this).parents(".comment");var a=$(this);a.hide();$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",data:{format:"js"},success:function(f){b=b.append(f.html);a.hide();var e=b.find("form.form");e.find(".cancel_edit_comment").click(function(){e.remove();a.show();return false});var d=e.find("input[type=submit]");var c=e.find("textarea");e.submit(function(){d.attr("disabled",true);$.ajax({url:e.attr("action"),dataType:"json",type:"PUT",data:e.serialize()+"&format=js",success:function(g,h){if(g.success){b.find(".markdown").html("<p>"+g.body+"</p>");e.remove();a.show();highlightEffect(b);showMessage(g.message,"notice");window.onbeforeunload=null}else{showMessage(g.message,"error");if(g.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}},error:manageAjaxError,complete:function(g,h){d.attr("disabled",false)}});return false})},error:manageAjaxError,complete:function(c,d){a.show()}});return false});$(".flag_form .cancel").live("click",function(){$("#question_flag_div").html("");return false});$(".answer .flag-link").live("click",function(){var b=$(this);var a=b.parents(".controls");$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",success:function(c){a.parents(".answer").find("#answer_flag_div").html(c.html);return false}});return false});$("#question_flag_link.flag-link").click(function(){$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",success:function(a){$("#question_flag_div").html(a.html);$("#request_close_question_form").slideUp();$("#close_question_form").slideUp();return false}});return false});$(".question-action").live("click",function(e){var d=$(this);if(!d.hasClass("busy")){d.addClass("busy");var c=d.attr("href");var g=d.attr("data-undo");var f=d.attr("title");var h=d.attr("data-title");var b=d.children("img");var a=$(d.attr("data-counter"));$.getJSON(c+".js",function(i){if(i.success){d.attr({href:g,"data-undo":c,title:h,"data-title":f});b.attr({src:b.attr("data-src"),"data-src":b.attr("src")});if(typeof(i.increment)!="undefined"){a.text(parseFloat($.trim(a.text()))+i.increment)}showMessage(i.message,"notice")}else{showMessage(i.message,"error");if(i.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}d.removeClass("busy")},"json")}return false});$(".ccontrol-link").live("click",function(){$(this).closest(".commentable").find(".comments_wrapper").slideToggle("slow");return false})});(function(a9,aK){var aR="none",aq="LoadedContent",a8=false,aP="resize.",aW="y",aU="auto",a6=true,ar="nofollow",aY="x";function a5(b,d){b=b?' id="'+a2+b+'"':"";d=d?' style="'+d+'"':"";return a9("<div"+b+d+"/>")}function aV(d,c){c=c===aY?aX.width():aX.height();return typeof d==="string"?Math.round(/%/.test(d)?c/100*parseInt(d,10):parseInt(d,10)):d}function ai(a){return ba.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function aI(b){for(var d in b){if(a9.isFunction(b[d])&&d.substring(0,2)!=="on"){b[d]=b[d].call(aZ)}}b.rel=b.rel||aZ.rel||ar;b.href=b.href||a9(aZ).attr("href");b.title=b.title||aZ.title;return b}function aO(d,b){b&&b.call(aZ);a9.event.trigger(d)}function aH(){var a,h=a2+"Slideshow_",i="click."+a2,g,d;if(ba.slideshow&&a3[1]){g=function(){ay.text(ba.slideshowStop).unbind(i).bind(ah,function(){if(a4<a3.length-1||ba.loop){a=setTimeout(a7.next,ba.slideshowSpeed)}}).bind(ag,function(){clearTimeout(a)}).one(i+" "+ap,d);a1.removeClass(h+"off").addClass(h+"on");a=setTimeout(a7.next,ba.slideshowSpeed)};d=function(){clearTimeout(a);ay.text(ba.slideshowStart).unbind([ah,ag,ap,i].join(" ")).one(i,g);a1.removeClass(h+"on").addClass(h+"off")};ba.slideshowAuto?g():d()}}function aF(b){if(!ao){aZ=b;ba=aI(a9.extend({},a9.data(aZ,aT)));a3=a9(aZ);a4=0;if(ba.rel!==ar){a3=a9("."+ax).filter(function(){return(a9.data(this,aT).rel||this.rel)===ba.rel});a4=a3.index(aZ);if(a4===-1){a3=a3.add(aZ);a4=a3.length-1}}if(!aQ){aQ=aA=a6;a1.show();if(ba.returnFocus){try{aZ.blur();a9(aZ).one(aa,function(){try{this.focus()}catch(c){}})}catch(a){}}aN.css({opacity:+ba.opacity,cursor:ba.overlayClose?"pointer":aU}).show();ba.w=aV(ba.initialWidth,aY);ba.h=aV(ba.initialHeight,aW);a7.position(0);af&&aX.bind(aP+an+" scroll."+an,function(){aN.css({width:aX.width(),height:aX.height(),top:aX.scrollTop(),left:aX.scrollLeft()})}).trigger("scroll."+an);aO(aJ,ba.onOpen);ae.add(aw).add(av).add(ay).add(ad).hide();aD.html(ba.close).show()}a7.load(a6)}}var aG={transition:"elastic",speed:300,width:a8,initialWidth:"600",innerWidth:a8,maxWidth:a8,height:a8,initialHeight:"450",innerHeight:a8,maxHeight:a8,scalePhotos:a6,scrolling:a6,inline:a8,html:a8,iframe:a8,photo:a8,href:a8,title:a8,rel:a8,opacity:0.9,preloading:a6,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:a8,returnFocus:a6,loop:a6,slideshow:a8,slideshowAuto:a6,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:a8,onLoad:a8,onComplete:a8,onCleanup:a8,onClosed:a8,overlayClose:a6,escKey:a6,arrowKey:a6},aT="colorbox",a2="cbox",aJ=a2+"_open",ag=a2+"_load",ah=a2+"_complete",ap=a2+"_cleanup",aa=a2+"_closed",am=a2+"_purge",ac=a2+"_loaded",az=a9.browser.msie&&!a9.support.opacity,af=az&&a9.browser.version<7,an=a2+"_IE6",aN,a1,aE,aS,bc,aj,al,ak,a3,aX,a0,au,at,ad,ae,ay,av,aw,aD,aC,aB,aM,aL,aZ,a4,ba,aQ,aA,ao=a8,a7,ax=a2+"Element";a7=a9.fn[aT]=a9[aT]=function(h,e){var b=this,g;if(!b[0]&&b.selector){return b}h=h||{};if(e){h.onComplete=e}if(!b[0]||b.selector===undefined){b=a9("<a/>");h.open=a6}b.each(function(){a9.data(this,aT,a9.extend({},a9.data(this,aT)||aG,h));a9(this).addClass(ax)});g=h.open;if(a9.isFunction(g)){g=g.call(b)}g&&aF(b[0]);return b};a7.init=function(){var b="hover",a="clear:left";aX=a9(aK);a1=a5().attr({id:aT,"class":az?a2+"IE":""});aN=a5("Overlay",af?"position:absolute":"").hide();aE=a5("Wrapper");aS=a5("Content").append(a0=a5(aq,"width:0; height:0; overflow:hidden"),at=a5("LoadingOverlay").add(a5("LoadingGraphic")),ad=a5("Title"),ae=a5("Current"),av=a5("Next"),aw=a5("Previous"),ay=a5("Slideshow").bind(aJ,aH),aD=a5("Close"));aE.append(a5().append(a5("TopLeft"),bc=a5("TopCenter"),a5("TopRight")),a5(a8,a).append(aj=a5("MiddleLeft"),aS,al=a5("MiddleRight")),a5(a8,a).append(a5("BottomLeft"),ak=a5("BottomCenter"),a5("BottomRight"))).children().children().css({"float":"left"});au=a5(a8,"position:absolute; width:9999px; visibility:hidden; display:none");a9("body").prepend(aN,a1.append(aE,au));aS.children().hover(function(){a9(this).addClass(b)},function(){a9(this).removeClass(b)}).addClass(b);aC=bc.height()+ak.height()+aS.outerHeight(a6)-aS.height();aB=aj.width()+al.width()+aS.outerWidth(a6)-aS.width();aM=a0.outerHeight(a6);aL=a0.outerWidth(a6);a1.css({"padding-bottom":aC,"padding-right":aB}).hide();av.click(a7.next);aw.click(a7.prev);aD.click(a7.close);aS.children().removeClass(b);a9("."+ax).live("click",function(c){if(!(c.button!==0&&typeof c.button!=="undefined"||c.ctrlKey||c.shiftKey||c.altKey)){c.preventDefault();aF(this)}});aN.click(function(){ba.overlayClose&&a7.close()});a9(document).bind("keydown",function(c){if(aQ&&ba.escKey&&c.keyCode===27){c.preventDefault();a7.close()}if(aQ&&ba.arrowKey&&!aA&&a3[1]){if(c.keyCode===37&&(a4||ba.loop)){c.preventDefault();aw.click()}else{if(c.keyCode===39&&(a4<a3.length-1||ba.loop)){c.preventDefault();av.click()}}}})};a7.remove=function(){a1.add(aN).remove();a9("."+ax).die("click").removeData(aT).removeClass(ax)};a7.position=function(j,l){function a(b){bc[0].style.width=ak[0].style.width=aS[0].style.width=b.style.width;at[0].style.height=at[1].style.height=aS[0].style.height=aj[0].style.height=al[0].style.height=b.style.height}var k,c=Math.max(document.documentElement.clientHeight-ba.h-aM-aC,0)/2+aX.scrollTop(),i=Math.max(aX.width()-ba.w-aL-aB,0)/2+aX.scrollLeft();k=a1.width()===ba.w+aL&&a1.height()===ba.h+aM?0:j;aE[0].style.width=aE[0].style.height="9999px";a1.dequeue().animate({width:ba.w+aL,height:ba.h+aM,top:c,left:i},{duration:k,complete:function(){a(this);aA=a8;aE[0].style.width=ba.w+aL+aB+"px";aE[0].style.height=ba.h+aM+aC+"px";l&&l()},step:function(){a(this)}})};a7.resize=function(a){if(aQ){a=a||{};if(a.width){ba.w=aV(a.width,aY)-aL-aB}if(a.innerWidth){ba.w=aV(a.innerWidth,aY)}a0.css({width:ba.w});if(a.height){ba.h=aV(a.height,aW)-aM-aC}if(a.innerHeight){ba.h=aV(a.innerHeight,aW)}if(!a.innerHeight&&!a.height){a=a0.wrapInner("<div style='overflow:auto'></div>").children();ba.h=a.height();a.replaceWith(a.children())}a0.css({height:ba.h});a7.position(ba.transition===aR?0:ba.speed)}};a7.prep=function(a){var g="hidden";function b(i){var n,k,e,o,h=a3.length,j=ba.loop;a7.position(i,function(){function c(){az&&a1[0].style.removeAttribute("filter")}if(aQ){az&&f&&a0.fadeIn(100);a0.show();aO(ac);ad.show().html(ba.title);if(h>1){typeof ba.current==="string"&&ae.html(ba.current.replace(/\{current\}/,a4+1).replace(/\{total\}/,h)).show();av[j||a4<h-1?"show":"hide"]().html(ba.next);aw[j||a4?"show":"hide"]().html(ba.previous);n=a4?a3[a4-1]:a3[h-1];e=a4<h-1?a3[a4+1]:a3[0];ba.slideshow&&ay.show();if(ba.preloading){o=a9.data(e,aT).href||e.href;k=a9.data(n,aT).href||n.href;o=a9.isFunction(o)?o.call(e):o;k=a9.isFunction(k)?k.call(n):k;if(ai(o)){a9("<img/>")[0].src=o}if(ai(k)){a9("<img/>")[0].src=k}}}at.hide();ba.transition==="fade"?a1.fadeTo(d,1,function(){c()}):c();aX.bind(aP+a2,function(){a7.position(0)});aO(ah,ba.onComplete)}})}if(aQ){var f,d=ba.transition===aR?0:ba.speed;aX.unbind(aP+a2);a0.remove();a0=a5(aq).html(a);a0.hide().appendTo(au.show()).css({width:function(){ba.w=ba.w||a0.width();ba.w=ba.mw&&ba.mw<ba.w?ba.mw:ba.w;return ba.w}(),overflow:ba.scrolling?aU:g}).css({height:function(){ba.h=ba.h||a0.height();ba.h=ba.mh&&ba.mh<ba.h?ba.mh:ba.h;return ba.h}()}).prependTo(aS);au.hide();a9("#"+a2+"Photo").css({cssFloat:aR,marginLeft:aU,marginRight:aU});af&&a9("select").not(a1.find("select")).filter(function(){return this.style.visibility!==g}).css({visibility:g}).one(ap,function(){this.style.visibility="inherit"});ba.transition==="fade"?a1.fadeTo(d,0,function(){b(0)}):b(d)}};a7.load=function(a){var f,e,b,d=a7.prep;aA=a6;aZ=a3[a4];a||(ba=aI(a9.extend({},a9.data(aZ,aT))));aO(am);aO(ag,ba.onLoad);ba.h=ba.height?aV(ba.height,aW)-aM-aC:ba.innerHeight&&aV(ba.innerHeight,aW);ba.w=ba.width?aV(ba.width,aY)-aL-aB:ba.innerWidth&&aV(ba.innerWidth,aY);ba.mw=ba.w;ba.mh=ba.h;if(ba.maxWidth){ba.mw=aV(ba.maxWidth,aY)-aL-aB;ba.mw=ba.w&&ba.w<ba.mw?ba.w:ba.mw}if(ba.maxHeight){ba.mh=aV(ba.maxHeight,aW)-aM-aC;ba.mh=ba.h&&ba.h<ba.mh?ba.h:ba.mh}f=ba.href;at.show();if(ba.inline){a5().hide().insertBefore(a9(f)[0]).one(am,function(){a9(this).replaceWith(a0.children())});d(a9(f))}else{if(ba.iframe){a1.one(ac,function(){var g=a9("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];g.name=a2+ +new Date;g.src=ba.href;if(!ba.scrolling){g.scrolling="no"}if(az){g.allowtransparency="true"}a9(g).appendTo(a0).one(am,function(){g.src="//about:blank"})});d(" ")}else{if(ba.html){d(ba.html)}else{if(ai(f)){e=new Image;e.onload=function(){var c;e.onload=null;e.id=a2+"Photo";a9(e).css({border:aR,display:"block",cssFloat:"left"});if(ba.scalePhotos){b=function(){e.height-=e.height*c;e.width-=e.width*c};if(ba.mw&&e.width>ba.mw){c=(e.width-ba.mw)/e.width;b()}if(ba.mh&&e.height>ba.mh){c=(e.height-ba.mh)/e.height;b()}}if(ba.h){e.style.marginTop=Math.max(ba.h-e.height,0)/2+"px"}a3[1]&&(a4<a3.length-1||ba.loop)&&a9(e).css({cursor:"pointer"}).click(a7.next);if(az){e.style.msInterpolationMode="bicubic"}setTimeout(function(){d(e)},1)};setTimeout(function(){e.src=f},1)}else{f&&au.load(f,function(h,i,g){d(i==="error"?"Request unsuccessful: "+g.statusText:a9(this).children())})}}}}};a7.next=function(){if(!aA){a4=a4<a3.length-1?a4+1:0;a7.load()}};a7.prev=function(){if(!aA){a4=a4?a4-1:a3.length-1;a7.load()}};a7.close=function(){if(aQ&&!ao){ao=a6;aQ=a8;aO(ap,ba.onCleanup);aX.unbind("."+a2+" ."+an);aN.fadeTo("fast",0);a1.stop().fadeTo("fast",0,function(){aO(am);a0.remove();a1.add(aN).css({opacity:1,cursor:aU}).hide();setTimeout(function(){ao=a8;aO(aa,ba.onClosed)},1)})}};a7.element=function(){return a9(aZ)};a7.settings=aG;a9(a7.init)})(jQuery,this);